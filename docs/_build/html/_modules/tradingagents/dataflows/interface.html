

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tradingagents.dataflows.interface &mdash; TradingAgents 0.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=e259d695"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            TradingAgents
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#quick-install">Quick Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#development-installation">Development Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#redis-setup-recommended">Redis Setup (Recommended)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#environment-configuration">Environment Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#verification">Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#running-with-caching">Running with Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#multi-agent-example">Multi-Agent Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#on-chain-analytics">On-Chain Analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#cli-interface">CLI Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../api/index.html#core-modules">Core Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html">tradingagents.agents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.FinancialSituationMemory"><code class="docutils literal notranslate"><span class="pre">FinancialSituationMemory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.Toolkit"><code class="docutils literal notranslate"><span class="pre">Toolkit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.AgentState"><code class="docutils literal notranslate"><span class="pre">AgentState</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_msg_delete"><code class="docutils literal notranslate"><span class="pre">create_msg_delete()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.InvestDebateState"><code class="docutils literal notranslate"><span class="pre">InvestDebateState</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.RiskDebateState"><code class="docutils literal notranslate"><span class="pre">RiskDebateState</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_bear_researcher"><code class="docutils literal notranslate"><span class="pre">create_bear_researcher()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_bull_researcher"><code class="docutils literal notranslate"><span class="pre">create_bull_researcher()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_research_manager"><code class="docutils literal notranslate"><span class="pre">create_research_manager()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_fundamentals_analyst"><code class="docutils literal notranslate"><span class="pre">create_fundamentals_analyst()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_market_analyst"><code class="docutils literal notranslate"><span class="pre">create_market_analyst()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_neutral_debator"><code class="docutils literal notranslate"><span class="pre">create_neutral_debator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_news_analyst"><code class="docutils literal notranslate"><span class="pre">create_news_analyst()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_onchain_analyst"><code class="docutils literal notranslate"><span class="pre">create_onchain_analyst()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_risky_debator"><code class="docutils literal notranslate"><span class="pre">create_risky_debator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_risk_manager"><code class="docutils literal notranslate"><span class="pre">create_risk_manager()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_safe_debator"><code class="docutils literal notranslate"><span class="pre">create_safe_debator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_social_media_analyst"><code class="docutils literal notranslate"><span class="pre">create_social_media_analyst()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.html#tradingagents.agents.create_trader"><code class="docutils literal notranslate"><span class="pre">create_trader()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html">tradingagents.dataflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_finnhub_news"><code class="docutils literal notranslate"><span class="pre">get_finnhub_news()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_finnhub_company_insider_sentiment"><code class="docutils literal notranslate"><span class="pre">get_finnhub_company_insider_sentiment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_finnhub_company_insider_transactions"><code class="docutils literal notranslate"><span class="pre">get_finnhub_company_insider_transactions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_google_news"><code class="docutils literal notranslate"><span class="pre">get_google_news()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_reddit_global_news"><code class="docutils literal notranslate"><span class="pre">get_reddit_global_news()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_reddit_company_news"><code class="docutils literal notranslate"><span class="pre">get_reddit_company_news()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_simfin_balance_sheet"><code class="docutils literal notranslate"><span class="pre">get_simfin_balance_sheet()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_simfin_cashflow"><code class="docutils literal notranslate"><span class="pre">get_simfin_cashflow()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_simfin_income_statements"><code class="docutils literal notranslate"><span class="pre">get_simfin_income_statements()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_stock_stats_indicators_window"><code class="docutils literal notranslate"><span class="pre">get_stock_stats_indicators_window()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_stockstats_indicator"><code class="docutils literal notranslate"><span class="pre">get_stockstats_indicator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_YFin_data_window"><code class="docutils literal notranslate"><span class="pre">get_YFin_data_window()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.html#tradingagents.dataflows.get_YFin_data"><code class="docutils literal notranslate"><span class="pre">get_YFin_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.ccxt_adapters.html">tradingagents.dataflows.ccxt_adapters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.config.html">tradingagents.dataflows.config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_cache.html">tradingagents.dataflows.crypto_cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_utils.html">tradingagents.dataflows.crypto_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.finnhub_utils.html">tradingagents.dataflows.finnhub_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.googlenews_utils.html">tradingagents.dataflows.googlenews_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html">tradingagents.dataflows.interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.metric_registry.html">tradingagents.dataflows.metric_registry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.onchain_loader.html">tradingagents.dataflows.onchain_loader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.reddit_utils.html">tradingagents.dataflows.reddit_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.stockstats_utils.html">tradingagents.dataflows.stockstats_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.utils.html">tradingagents.dataflows.utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.yfin_utils.html">tradingagents.dataflows.yfin_utils</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.graph.html">tradingagents.graph</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.html#tradingagents.graph.TradingAgentsGraph"><code class="docutils literal notranslate"><span class="pre">TradingAgentsGraph</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.html#tradingagents.graph.ConditionalLogic"><code class="docutils literal notranslate"><span class="pre">ConditionalLogic</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.html#tradingagents.graph.GraphSetup"><code class="docutils literal notranslate"><span class="pre">GraphSetup</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.html#tradingagents.graph.Propagator"><code class="docutils literal notranslate"><span class="pre">Propagator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.html#tradingagents.graph.Reflector"><code class="docutils literal notranslate"><span class="pre">Reflector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.html#tradingagents.graph.SignalProcessor"><code class="docutils literal notranslate"><span class="pre">SignalProcessor</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.conditional_logic.html">tradingagents.graph.conditional_logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.propagation.html">tradingagents.graph.propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.reflection.html">tradingagents.graph.reflection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.setup.html">tradingagents.graph.setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.signal_processing.html">tradingagents.graph.signal_processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.trading_graph.html">tradingagents.graph.trading_graph</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/index.html#agents">Agents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.fundamentals_analyst.html">tradingagents.agents.analysts.fundamentals_analyst</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.fundamentals_analyst.html#tradingagents.agents.analysts.fundamentals_analyst.create_fundamentals_analyst"><code class="docutils literal notranslate"><span class="pre">create_fundamentals_analyst()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.market_analyst.html">tradingagents.agents.analysts.market_analyst</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.market_analyst.html#tradingagents.agents.analysts.market_analyst.create_market_analyst"><code class="docutils literal notranslate"><span class="pre">create_market_analyst()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.news_analyst.html">tradingagents.agents.analysts.news_analyst</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.news_analyst.html#tradingagents.agents.analysts.news_analyst.create_news_analyst"><code class="docutils literal notranslate"><span class="pre">create_news_analyst()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.onchain_analyst.html">tradingagents.agents.analysts.onchain_analyst</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.onchain_analyst.html#tradingagents.agents.analysts.onchain_analyst.create_onchain_analyst"><code class="docutils literal notranslate"><span class="pre">create_onchain_analyst()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.social_media_analyst.html">tradingagents.agents.analysts.social_media_analyst</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.analysts.social_media_analyst.html#tradingagents.agents.analysts.social_media_analyst.create_social_media_analyst"><code class="docutils literal notranslate"><span class="pre">create_social_media_analyst()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.managers.research_manager.html">tradingagents.agents.managers.research_manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.managers.research_manager.html#tradingagents.agents.managers.research_manager.create_research_manager"><code class="docutils literal notranslate"><span class="pre">create_research_manager()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.managers.risk_manager.html">tradingagents.agents.managers.risk_manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.managers.risk_manager.html#tradingagents.agents.managers.risk_manager.create_risk_manager"><code class="docutils literal notranslate"><span class="pre">create_risk_manager()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.researchers.bear_researcher.html">tradingagents.agents.researchers.bear_researcher</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.researchers.bear_researcher.html#tradingagents.agents.researchers.bear_researcher.create_bear_researcher"><code class="docutils literal notranslate"><span class="pre">create_bear_researcher()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.researchers.bull_researcher.html">tradingagents.agents.researchers.bull_researcher</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.researchers.bull_researcher.html#tradingagents.agents.researchers.bull_researcher.create_bull_researcher"><code class="docutils literal notranslate"><span class="pre">create_bull_researcher()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.risk_mgmt.aggresive_debator.html">tradingagents.agents.risk_mgmt.aggresive_debator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.risk_mgmt.aggresive_debator.html#tradingagents.agents.risk_mgmt.aggresive_debator.create_risky_debator"><code class="docutils literal notranslate"><span class="pre">create_risky_debator()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.risk_mgmt.conservative_debator.html">tradingagents.agents.risk_mgmt.conservative_debator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.risk_mgmt.conservative_debator.html#tradingagents.agents.risk_mgmt.conservative_debator.create_safe_debator"><code class="docutils literal notranslate"><span class="pre">create_safe_debator()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.risk_mgmt.neutral_debator.html">tradingagents.agents.risk_mgmt.neutral_debator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.risk_mgmt.neutral_debator.html#tradingagents.agents.risk_mgmt.neutral_debator.create_neutral_debator"><code class="docutils literal notranslate"><span class="pre">create_neutral_debator()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.trader.trader.html">tradingagents.agents.trader.trader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.trader.trader.html#tradingagents.agents.trader.trader.create_trader"><code class="docutils literal notranslate"><span class="pre">create_trader()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/index.html#data-infrastructure">Data Infrastructure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.ccxt_adapters.html">tradingagents.dataflows.ccxt_adapters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.ccxt_adapters.html#tradingagents.dataflows.ccxt_adapters.ExchangeConfig"><code class="docutils literal notranslate"><span class="pre">ExchangeConfig</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.ccxt_adapters.html#tradingagents.dataflows.ccxt_adapters.init_exchange_client"><code class="docutils literal notranslate"><span class="pre">init_exchange_client()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.ccxt_adapters.html#tradingagents.dataflows.ccxt_adapters.CCXTAdapters"><code class="docutils literal notranslate"><span class="pre">CCXTAdapters</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_cache.html">tradingagents.dataflows.crypto_cache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_cache.html#tradingagents.dataflows.crypto_cache.DataVolatility"><code class="docutils literal notranslate"><span class="pre">DataVolatility</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_cache.html#tradingagents.dataflows.crypto_cache.SmartTTLStrategy"><code class="docutils literal notranslate"><span class="pre">SmartTTLStrategy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_cache.html#tradingagents.dataflows.crypto_cache.CryptoCacheManager"><code class="docutils literal notranslate"><span class="pre">CryptoCacheManager</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_cache.html#tradingagents.dataflows.crypto_cache.get_cache_manager"><code class="docutils literal notranslate"><span class="pre">get_cache_manager()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_cache.html#tradingagents.dataflows.crypto_cache.cache_crypto_request"><code class="docutils literal notranslate"><span class="pre">cache_crypto_request()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_utils.html">tradingagents.dataflows.crypto_utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_utils.html#tradingagents.dataflows.crypto_utils.init_crypto_client"><code class="docutils literal notranslate"><span class="pre">init_crypto_client()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.crypto_utils.html#tradingagents.dataflows.crypto_utils.CryptoUtils"><code class="docutils literal notranslate"><span class="pre">CryptoUtils</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.metric_registry.html">tradingagents.dataflows.metric_registry</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.metric_registry.html#tradingagents.dataflows.metric_registry.DataProvider"><code class="docutils literal notranslate"><span class="pre">DataProvider</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.metric_registry.html#tradingagents.dataflows.metric_registry.BatchOptimizer"><code class="docutils literal notranslate"><span class="pre">BatchOptimizer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.metric_registry.html#tradingagents.dataflows.metric_registry.MetricRegistry"><code class="docutils literal notranslate"><span class="pre">MetricRegistry</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.metric_registry.html#tradingagents.dataflows.metric_registry.get_metric_registry"><code class="docutils literal notranslate"><span class="pre">get_metric_registry()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.onchain_loader.html">tradingagents.dataflows.onchain_loader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.onchain_loader.html#tradingagents.dataflows.onchain_loader.OnChainLoader"><code class="docutils literal notranslate"><span class="pre">OnChainLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.onchain_loader.html#tradingagents.dataflows.onchain_loader.get_onchain_loader"><code class="docutils literal notranslate"><span class="pre">get_onchain_loader()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html">tradingagents.dataflows.interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_finnhub_news"><code class="docutils literal notranslate"><span class="pre">get_finnhub_news()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_crypto_data_online"><code class="docutils literal notranslate"><span class="pre">get_crypto_data_online()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_crypto_info_online"><code class="docutils literal notranslate"><span class="pre">get_crypto_info_online()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_exchange_ohlcv_data"><code class="docutils literal notranslate"><span class="pre">get_exchange_ohlcv_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_exchange_order_book"><code class="docutils literal notranslate"><span class="pre">get_exchange_order_book()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.compare_crypto_exchanges"><code class="docutils literal notranslate"><span class="pre">compare_crypto_exchanges()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_supported_crypto_exchanges"><code class="docutils literal notranslate"><span class="pre">get_supported_crypto_exchanges()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_onchain_network_health"><code class="docutils literal notranslate"><span class="pre">get_onchain_network_health()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_onchain_market_indicators"><code class="docutils literal notranslate"><span class="pre">get_onchain_market_indicators()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_onchain_comprehensive_analysis"><code class="docutils literal notranslate"><span class="pre">get_onchain_comprehensive_analysis()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_metric_registry_data"><code class="docutils literal notranslate"><span class="pre">get_metric_registry_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_finnhub_company_insider_sentiment"><code class="docutils literal notranslate"><span class="pre">get_finnhub_company_insider_sentiment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_finnhub_company_insider_transactions"><code class="docutils literal notranslate"><span class="pre">get_finnhub_company_insider_transactions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_simfin_balance_sheet"><code class="docutils literal notranslate"><span class="pre">get_simfin_balance_sheet()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_simfin_cashflow"><code class="docutils literal notranslate"><span class="pre">get_simfin_cashflow()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_simfin_income_statements"><code class="docutils literal notranslate"><span class="pre">get_simfin_income_statements()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_google_news"><code class="docutils literal notranslate"><span class="pre">get_google_news()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_reddit_global_news"><code class="docutils literal notranslate"><span class="pre">get_reddit_global_news()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_reddit_company_news"><code class="docutils literal notranslate"><span class="pre">get_reddit_company_news()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_stock_stats_indicators_window"><code class="docutils literal notranslate"><span class="pre">get_stock_stats_indicators_window()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_stockstats_indicator"><code class="docutils literal notranslate"><span class="pre">get_stockstats_indicator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_YFin_data_window"><code class="docutils literal notranslate"><span class="pre">get_YFin_data_window()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_YFin_data_online"><code class="docutils literal notranslate"><span class="pre">get_YFin_data_online()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_YFin_data"><code class="docutils literal notranslate"><span class="pre">get_YFin_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_stock_news_openai"><code class="docutils literal notranslate"><span class="pre">get_stock_news_openai()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_global_news_openai"><code class="docutils literal notranslate"><span class="pre">get_global_news_openai()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.interface.get_fundamentals_openai"><code class="docutils literal notranslate"><span class="pre">get_fundamentals_openai()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.config.html">tradingagents.dataflows.config</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.config.html#tradingagents.dataflows.config.initialize_config"><code class="docutils literal notranslate"><span class="pre">initialize_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.config.html#tradingagents.dataflows.config.set_config"><code class="docutils literal notranslate"><span class="pre">set_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.config.html#tradingagents.dataflows.config.get_config"><code class="docutils literal notranslate"><span class="pre">get_config()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/index.html#market-data-adapters">Market Data Adapters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.yfin_utils.html">tradingagents.dataflows.yfin_utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.yfin_utils.html#tradingagents.dataflows.yfin_utils.init_ticker"><code class="docutils literal notranslate"><span class="pre">init_ticker()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.yfin_utils.html#tradingagents.dataflows.yfin_utils.YFinanceUtils"><code class="docutils literal notranslate"><span class="pre">YFinanceUtils</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.finnhub_utils.html">tradingagents.dataflows.finnhub_utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.finnhub_utils.html#tradingagents.dataflows.finnhub_utils.get_data_in_range"><code class="docutils literal notranslate"><span class="pre">get_data_in_range()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.googlenews_utils.html">tradingagents.dataflows.googlenews_utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.googlenews_utils.html#tradingagents.dataflows.googlenews_utils.is_rate_limited"><code class="docutils literal notranslate"><span class="pre">is_rate_limited()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.googlenews_utils.html#tradingagents.dataflows.googlenews_utils.make_request"><code class="docutils literal notranslate"><span class="pre">make_request()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.googlenews_utils.html#tradingagents.dataflows.googlenews_utils.getNewsData"><code class="docutils literal notranslate"><span class="pre">getNewsData()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.reddit_utils.html">tradingagents.dataflows.reddit_utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.reddit_utils.html#tradingagents.dataflows.reddit_utils.fetch_top_from_category"><code class="docutils literal notranslate"><span class="pre">fetch_top_from_category()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.stockstats_utils.html">tradingagents.dataflows.stockstats_utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.stockstats_utils.html#tradingagents.dataflows.stockstats_utils.StockstatsUtils"><code class="docutils literal notranslate"><span class="pre">StockstatsUtils</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/index.html#graph-signal-processing">Graph &amp; Signal Processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.graph.trading_graph.html">tradingagents.graph.trading_graph</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.trading_graph.html#tradingagents.graph.trading_graph.TradingAgentsGraph"><code class="docutils literal notranslate"><span class="pre">TradingAgentsGraph</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.graph.signal_processing.html">tradingagents.graph.signal_processing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.signal_processing.html#tradingagents.graph.signal_processing.SignalProcessor"><code class="docutils literal notranslate"><span class="pre">SignalProcessor</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.graph.conditional_logic.html">tradingagents.graph.conditional_logic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.conditional_logic.html#tradingagents.graph.conditional_logic.ConditionalLogic"><code class="docutils literal notranslate"><span class="pre">ConditionalLogic</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.graph.propagation.html">tradingagents.graph.propagation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.propagation.html#tradingagents.graph.propagation.Propagator"><code class="docutils literal notranslate"><span class="pre">Propagator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.graph.reflection.html">tradingagents.graph.reflection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.graph.reflection.html#tradingagents.graph.reflection.Reflector"><code class="docutils literal notranslate"><span class="pre">Reflector</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/index.html#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.agent_states.html">tradingagents.agents.utils.agent_states</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.agent_states.html#tradingagents.agents.utils.agent_states.InvestDebateState"><code class="docutils literal notranslate"><span class="pre">InvestDebateState</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.agent_states.html#tradingagents.agents.utils.agent_states.RiskDebateState"><code class="docutils literal notranslate"><span class="pre">RiskDebateState</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.agent_states.html#tradingagents.agents.utils.agent_states.AgentState"><code class="docutils literal notranslate"><span class="pre">AgentState</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.agent_utils.html">tradingagents.agents.utils.agent_utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.agent_utils.html#tradingagents.agents.utils.agent_utils.create_msg_delete"><code class="docutils literal notranslate"><span class="pre">create_msg_delete()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.agent_utils.html#tradingagents.agents.utils.agent_utils.Toolkit"><code class="docutils literal notranslate"><span class="pre">Toolkit</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.memory.html">tradingagents.agents.utils.memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.agents.utils.memory.html#tradingagents.agents.utils.memory.FinancialSituationMemory"><code class="docutils literal notranslate"><span class="pre">FinancialSituationMemory</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.utils.html">tradingagents.dataflows.utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.utils.html#tradingagents.dataflows.utils.save_output"><code class="docutils literal notranslate"><span class="pre">save_output()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.utils.html#tradingagents.dataflows.utils.get_current_date"><code class="docutils literal notranslate"><span class="pre">get_current_date()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.utils.html#tradingagents.dataflows.utils.decorate_all_methods"><code class="docutils literal notranslate"><span class="pre">decorate_all_methods()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/generated/tradingagents.dataflows.utils.html#tradingagents.dataflows.utils.get_next_weekday"><code class="docutils literal notranslate"><span class="pre">get_next_weekday()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#v0-3-0-2025-07-15">v0.3.0 (2025-07-15)</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TradingAgents</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">tradingagents.dataflows.interface</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for tradingagents.dataflows.interface</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">Dict</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.reddit_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">fetch_top_from_category</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.yfin_utils</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.stockstats_utils</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.googlenews_utils</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.finnhub_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_data_in_range</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.crypto_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">CryptoUtils</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.ccxt_adapters</span><span class="w"> </span><span class="kn">import</span> <span class="n">CCXTAdapters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.onchain_loader</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_onchain_loader</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.metric_registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_metric_registry</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dateutil.relativedelta</span><span class="w"> </span><span class="kn">import</span> <span class="n">relativedelta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">concurrent.futures</span><span class="w"> </span><span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">yfinance</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">yf</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">set_config</span><span class="p">,</span> <span class="n">DATA_DIR</span>


<div class="viewcode-block" id="get_finnhub_news">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_finnhub_news">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_finnhub_news</span><span class="p">(</span>
    <span class="n">ticker</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;Search query of a company&#39;s, e.g. &#39;AAPL, TSM, etc.&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Current date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
    <span class="n">look_back_days</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;how many days to look back&quot;</span><span class="p">],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve news about a company within a time frame</span>

<span class="sd">    Args</span>
<span class="sd">        ticker (str): ticker for the company you are interested in</span>
<span class="sd">        start_date (str): Start date in yyyy-mm-dd format</span>
<span class="sd">        end_date (str): End date in yyyy-mm-dd format</span>
<span class="sd">    Returns</span>
<span class="sd">        str: dataframe containing the news of the company in the time frame</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">look_back_days</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">get_data_in_range</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;news_data&quot;</span><span class="p">,</span> <span class="n">DATA_DIR</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="n">combined_result</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">day</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">current_news</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;### &quot;</span> <span class="o">+</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;headline&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">day</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;summary&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">combined_result</span> <span class="o">+=</span> <span class="n">current_news</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> News, from </span><span class="si">{</span><span class="n">before</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">combined_result</span><span class="p">)</span></div>



<div class="viewcode-block" id="get_crypto_data_online">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_crypto_data_online">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_crypto_data_online</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;crypto symbol like BTC, ETH, BTC-USD&quot;</span><span class="p">],</span>
    <span class="n">start_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Start date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
    <span class="n">end_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;End date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve crypto price data from CoinGecko API.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        symbol (str): Crypto symbol like BTC, ETH, BTC-USD</span>
<span class="sd">        start_date (str): Start date in yyyy-mm-dd format</span>
<span class="sd">        end_date (str): End date in yyyy-mm-dd format</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Formatted DataFrame containing crypto price data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">crypto_utils</span> <span class="o">=</span> <span class="n">CryptoUtils</span><span class="p">()</span>
        <span class="n">crypto_data</span> <span class="o">=</span> <span class="n">crypto_utils</span><span class="o">.</span><span class="n">get_crypto_data</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">crypto_data</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;No crypto data found for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> between </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> Crypto Price Data from </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="n">crypto_data</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error fetching crypto data for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_crypto_info_online">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_crypto_info_online">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_crypto_info_online</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;crypto symbol like BTC, ETH, BTC-USD&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve current crypto market information from CoinGecko API.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        symbol (str): Crypto symbol like BTC, ETH, BTC-USD</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Formatted crypto market information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">crypto_utils</span> <span class="o">=</span> <span class="n">CryptoUtils</span><span class="p">()</span>
        <span class="n">crypto_info</span> <span class="o">=</span> <span class="n">crypto_utils</span><span class="o">.</span><span class="n">get_crypto_info</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        
        <span class="n">info_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> Market Information:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">info_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Name: </span><span class="si">{</span><span class="n">crypto_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">info_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Symbol: </span><span class="si">{</span><span class="n">crypto_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;symbol&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">info_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Current Price: $</span><span class="si">{</span><span class="n">crypto_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;current_price&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">info_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Market Cap: $</span><span class="si">{</span><span class="n">crypto_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;market_cap&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">:</span><span class="s2">,.0f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">info_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;24h Volume: $</span><span class="si">{</span><span class="n">crypto_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;total_volume&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">:</span><span class="s2">,.0f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">info_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;24h Price Change: </span><span class="si">{</span><span class="n">crypto_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;price_change_24h&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">:</span><span class="s2">+.2f</span><span class="si">}</span><span class="s2">%</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">info_text</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error fetching crypto info for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_exchange_ohlcv_data">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_exchange_ohlcv_data">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_exchange_ohlcv_data</span><span class="p">(</span>
    <span class="n">exchange</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Exchange name like &#39;binance&#39;, &#39;kraken&#39;, &#39;coinbase&#39;&quot;</span><span class="p">],</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Trading pair symbol like &#39;BTC/USDT&#39;, &#39;ETH/USD&#39;&quot;</span><span class="p">],</span>
    <span class="n">timeframe</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Timeframe like &#39;1h&#39;, &#39;4h&#39;, &#39;1d&#39;&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1h&#39;</span><span class="p">,</span>
    <span class="n">limit</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;Number of candles to fetch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch OHLCV data from a specific cryptocurrency exchange using CCXT.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        exchange (str): Exchange name (binance, kraken, coinbase, okx, huobi)</span>
<span class="sd">        symbol (str): Trading pair symbol (e.g., &#39;BTC/USDT&#39;, &#39;ETH/USD&#39;)</span>
<span class="sd">        timeframe (str): Candlestick timeframe (&#39;1m&#39;, &#39;5m&#39;, &#39;1h&#39;, &#39;4h&#39;, &#39;1d&#39;)</span>
<span class="sd">        limit (int): Number of candlesticks to fetch</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Formatted DataFrame with OHLCV data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ccxt_adapters</span> <span class="o">=</span> <span class="n">CCXTAdapters</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">ccxt_adapters</span><span class="o">.</span><span class="n">fetch_ohlcv</span><span class="p">(</span><span class="n">exchange</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">=</span><span class="n">timeframe</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;No OHLCV data found for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">exchange</span><span class="si">}</span><span class="s2">&quot;</span>
        
        <span class="c1"># Add some basic analytics</span>
        <span class="n">latest_price</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">price_change</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">price_change_pct</span> <span class="o">=</span> <span class="p">(</span><span class="n">price_change</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">avg_volume</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> OHLCV Data from </span><span class="si">{</span><span class="n">exchange</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">timeframe</span><span class="si">}</span><span class="s2"> timeframe):</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Latest Price: $</span><span class="si">{</span><span class="n">latest_price</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Price Change: </span><span class="si">{</span><span class="n">price_change</span><span class="si">:</span><span class="s2">+.2f</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">price_change_pct</span><span class="si">:</span><span class="s2">+.2f</span><span class="si">}</span><span class="s2">%)</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Average Volume (10 periods): </span><span class="si">{</span><span class="n">avg_volume</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Data Points: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2"> candles</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>  <span class="c1"># Show last 20 candles</span>
        
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error fetching OHLCV data from </span><span class="si">{</span><span class="n">exchange</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_exchange_order_book">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_exchange_order_book">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_exchange_order_book</span><span class="p">(</span>
    <span class="n">exchange</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Exchange name like &#39;binance&#39;, &#39;kraken&#39;, &#39;coinbase&#39;&quot;</span><span class="p">],</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Trading pair symbol like &#39;BTC/USDT&#39;, &#39;ETH/USD&#39;&quot;</span><span class="p">],</span>
    <span class="n">limit</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;Number of order book levels to fetch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch order book depth from a specific cryptocurrency exchange using CCXT.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        exchange (str): Exchange name (binance, kraken, coinbase, okx, huobi)</span>
<span class="sd">        symbol (str): Trading pair symbol (e.g., &#39;BTC/USDT&#39;, &#39;ETH/USD&#39;)</span>
<span class="sd">        limit (int): Number of order book levels to fetch</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Formatted order book data with analysis</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ccxt_adapters</span> <span class="o">=</span> <span class="n">CCXTAdapters</span><span class="p">()</span>
        <span class="n">order_book</span> <span class="o">=</span> <span class="n">ccxt_adapters</span><span class="o">.</span><span class="n">fetch_order_book</span><span class="p">(</span><span class="n">exchange</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
        
        <span class="c1"># Format the analysis</span>
        <span class="n">spread</span> <span class="o">=</span> <span class="n">order_book</span><span class="p">[</span><span class="s1">&#39;spread&#39;</span><span class="p">]</span>
        <span class="n">volume</span> <span class="o">=</span> <span class="n">order_book</span><span class="p">[</span><span class="s1">&#39;volume_analysis&#39;</span><span class="p">]</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="n">order_book</span><span class="p">[</span><span class="s1">&#39;depth_analysis&#39;</span><span class="p">]</span>
        <span class="n">quality</span> <span class="o">=</span> <span class="n">order_book</span><span class="p">[</span><span class="s1">&#39;market_quality&#39;</span><span class="p">]</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> Order Book Analysis from </span><span class="si">{</span><span class="n">exchange</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Spread Analysis:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Best Bid: $</span><span class="si">{</span><span class="n">spread</span><span class="p">[</span><span class="s1">&#39;best_bid&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Best Ask: $</span><span class="si">{</span><span class="n">spread</span><span class="p">[</span><span class="s1">&#39;best_ask&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Spread: $</span><span class="si">{</span><span class="n">spread</span><span class="p">[</span><span class="s1">&#39;absolute&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">spread</span><span class="p">[</span><span class="s1">&#39;percentage&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">%)</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Volume Dynamics:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Bid Volume (Top 10): </span><span class="si">{</span><span class="n">volume</span><span class="p">[</span><span class="s1">&#39;bid_volume_top10&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Ask Volume (Top 10): </span><span class="si">{</span><span class="n">volume</span><span class="p">[</span><span class="s1">&#39;ask_volume_top10&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Volume Imbalance: </span><span class="si">{</span><span class="n">volume</span><span class="p">[</span><span class="s1">&#39;volume_imbalance&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">+.3f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Market Signal: </span><span class="si">{</span><span class="n">volume</span><span class="p">[</span><span class="s1">&#39;imbalance_signal&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Market Depth:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Bid Depth (Top 5): $</span><span class="si">{</span><span class="n">depth</span><span class="p">[</span><span class="s1">&#39;bid_depth_top5&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.0f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Ask Depth (Top 5): $</span><span class="si">{</span><span class="n">depth</span><span class="p">[</span><span class="s1">&#39;ask_depth_top5&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.0f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Total Depth: $</span><span class="si">{</span><span class="n">depth</span><span class="p">[</span><span class="s1">&#39;total_depth&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.0f</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Market Quality:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Spread Category: </span><span class="si">{</span><span class="n">quality</span><span class="p">[</span><span class="s1">&#39;spread_category&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Liquidity Score: </span><span class="si">{</span><span class="n">quality</span><span class="p">[</span><span class="s1">&#39;liquidity_score&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">/100</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Order Book Levels: </span><span class="si">{</span><span class="n">quality</span><span class="p">[</span><span class="s1">&#39;order_book_levels&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># Add top 5 bids and asks</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Top Order Book Levels:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;BIDS:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">volume</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">order_book</span><span class="p">[</span><span class="s1">&#39;bids&#39;</span><span class="p">][:</span><span class="mi">5</span><span class="p">],</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. $</span><span class="si">{</span><span class="n">price</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">volume</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ASKS:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">volume</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">order_book</span><span class="p">[</span><span class="s1">&#39;asks&#39;</span><span class="p">][:</span><span class="mi">5</span><span class="p">],</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. $</span><span class="si">{</span><span class="n">price</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">volume</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error fetching order book from </span><span class="si">{</span><span class="n">exchange</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="compare_crypto_exchanges">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.compare_crypto_exchanges">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">compare_crypto_exchanges</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Trading pair symbol like &#39;BTC/USDT&#39;, &#39;ETH/USD&#39;&quot;</span><span class="p">],</span>
    <span class="n">exchanges</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Comma-separated exchange names&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;binance,kraken,coinbase&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compare cryptocurrency prices and liquidity across multiple exchanges for arbitrage opportunities.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        symbol (str): Trading pair symbol (e.g., &#39;BTC/USDT&#39;, &#39;ETH/USD&#39;)</span>
<span class="sd">        exchanges (str): Comma-separated list of exchange names</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Exchange comparison with arbitrage opportunities</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">exchange_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">ex</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">exchanges</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
        <span class="n">ccxt_adapters</span> <span class="o">=</span> <span class="n">CCXTAdapters</span><span class="p">()</span>
        <span class="n">comparison</span> <span class="o">=</span> <span class="n">ccxt_adapters</span><span class="o">.</span><span class="n">get_exchange_comparison</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">exchanges</span><span class="o">=</span><span class="n">exchange_list</span><span class="p">)</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## Cross-Exchange Analysis for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># Exchange data</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Exchange Comparison:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">exchanges_data</span> <span class="o">=</span> <span class="n">comparison</span><span class="p">[</span><span class="s1">&#39;exchanges&#39;</span><span class="p">]</span>
        <span class="n">successful_exchanges</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">exchange_name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">exchanges_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;error&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">successful_exchanges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">exchange_name</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**</span><span class="si">{</span><span class="n">exchange_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">:**</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Price: $</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Spread: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;spread_pct&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">%</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Liquidity: $</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;liquidity&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.0f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Volume Signal: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_imbalance&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">+.3f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Quality: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;market_quality&#39;</span><span class="p">][</span><span class="s1">&#39;spread_category&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**</span><span class="si">{</span><span class="n">exchange_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">:**  </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># Arbitrage opportunities</span>
        <span class="n">arbitrage_ops</span> <span class="o">=</span> <span class="n">comparison</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;arbitrage_opportunities&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="n">arbitrage_ops</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;###  Arbitrage Opportunities:</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">op</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arbitrage_ops</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">profit_indicator</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">op</span><span class="p">[</span><span class="s1">&#39;potential_profit&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">op</span><span class="p">[</span><span class="s1">&#39;potential_profit&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">profit_indicator</span><span class="si">}</span><span class="s2"> **Opportunity #</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">:**</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Buy on: </span><span class="si">{</span><span class="n">op</span><span class="p">[</span><span class="s1">&#39;buy_exchange&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Sell on: </span><span class="si">{</span><span class="n">op</span><span class="p">[</span><span class="s1">&#39;sell_exchange&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Price Difference: </span><span class="si">{</span><span class="n">op</span><span class="p">[</span><span class="s1">&#39;price_difference_pct&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Estimated Profit: </span><span class="si">{</span><span class="n">op</span><span class="p">[</span><span class="s1">&#39;potential_profit&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;###  Arbitrage Analysis:</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">successful_exchanges</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;No significant arbitrage opportunities found. Market prices are well-aligned.</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;Insufficient exchange data for arbitrage analysis.</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># Best venues</span>
        <span class="k">if</span> <span class="n">comparison</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;best_liquidity&#39;</span><span class="p">):</span>
            <span class="n">best_liquidity</span> <span class="o">=</span> <span class="n">comparison</span><span class="p">[</span><span class="s1">&#39;best_liquidity&#39;</span><span class="p">]</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;** Best Liquidity:** </span><span class="si">{</span><span class="n">best_liquidity</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> ($</span><span class="si">{</span><span class="n">best_liquidity</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">,.0f</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">if</span> <span class="n">comparison</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tightest_spread&#39;</span><span class="p">):</span>
            <span class="n">tightest_spread</span> <span class="o">=</span> <span class="n">comparison</span><span class="p">[</span><span class="s1">&#39;tightest_spread&#39;</span><span class="p">]</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;** Tightest Spread:** </span><span class="si">{</span><span class="n">tightest_spread</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">tightest_spread</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">%)</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error comparing exchanges: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_supported_crypto_exchanges">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_supported_crypto_exchanges">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_supported_crypto_exchanges</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of supported cryptocurrency exchanges and their capabilities.</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Formatted list of supported exchanges with capabilities</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ccxt_adapters</span> <span class="o">=</span> <span class="n">CCXTAdapters</span><span class="p">()</span>
        <span class="n">exchanges</span> <span class="o">=</span> <span class="n">ccxt_adapters</span><span class="o">.</span><span class="n">get_supported_exchanges</span><span class="p">()</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;## Supported Cryptocurrency Exchanges:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="k">for</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">exchanges</span><span class="p">:</span>
            <span class="n">sandbox_status</span> <span class="o">=</span> <span class="s2">&quot; Sandbox Available&quot;</span> <span class="k">if</span> <span class="n">exchange</span><span class="p">[</span><span class="s1">&#39;sandbox_available&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot; Live Only&quot;</span>
            
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;###  </span><span class="si">{</span><span class="n">exchange</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;-  OHLCV Data: </span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">exchange</span><span class="p">[</span><span class="s1">&#39;has_ohlcv&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;-  Order Book: </span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">exchange</span><span class="p">[</span><span class="s1">&#39;has_order_book&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;-  Rate Limit: </span><span class="si">{</span><span class="n">exchange</span><span class="p">[</span><span class="s1">&#39;rate_limit_per_minute&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> requests/minute</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;-  Trading Fees: </span><span class="si">{</span><span class="n">exchange</span><span class="p">[</span><span class="s1">&#39;trading_fees&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;-   Testing: </span><span class="si">{</span><span class="n">sandbox_status</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Total Exchanges:** </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">exchanges</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;**Usage Examples:**</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;- `get_exchange_ohlcv_data(&#39;binance&#39;, &#39;BTC/USDT&#39;, &#39;1h&#39;, 50)`</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;- `get_exchange_order_book(&#39;kraken&#39;, &#39;ETH/USD&#39;, 20)`</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;- `compare_crypto_exchanges(&#39;BTC/USDT&#39;, &#39;binance,kraken,coinbase&#39;)`</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error getting supported exchanges: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_onchain_network_health">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_onchain_network_health">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_onchain_network_health</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;crypto symbol like BTC, ETH&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve comprehensive network health metrics for a cryptocurrency.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        symbol (str): Crypto symbol like BTC, ETH</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Formatted network health analysis</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">onchain_loader</span> <span class="o">=</span> <span class="n">get_onchain_loader</span><span class="p">()</span>
        <span class="n">health_data</span> <span class="o">=</span> <span class="n">onchain_loader</span><span class="o">.</span><span class="n">get_network_health</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> Network Health Analysis:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Health Score:** </span><span class="si">{</span><span class="n">health_data</span><span class="p">[</span><span class="s1">&#39;health_score&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/100 (</span><span class="si">{</span><span class="n">health_data</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Network Metrics:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="n">health_data</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">]</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Active Addresses (24h): </span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;active_addresses&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Hash Rate: </span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hash_rate&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Transaction Count (24h): </span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;transactions_24h&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Average Fee: $</span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;avg_fee_usd&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Analysis:** </span><span class="si">{</span><span class="n">health_data</span><span class="p">[</span><span class="s1">&#39;analysis&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error fetching network health for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_onchain_market_indicators">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_onchain_market_indicators">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_onchain_market_indicators</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;crypto symbol like BTC, ETH&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve on-chain market indicators for a cryptocurrency.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        symbol (str): Crypto symbol like BTC, ETH</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Formatted market indicators</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">onchain_loader</span> <span class="o">=</span> <span class="n">get_onchain_loader</span><span class="p">()</span>
        <span class="n">indicators</span> <span class="o">=</span> <span class="n">onchain_loader</span><span class="o">.</span><span class="n">get_market_indicators</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> On-Chain Market Indicators:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Exchange Flows:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">exchange_flows</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exchange_flows&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Net Flow: </span><span class="si">{</span><span class="n">exchange_flows</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;net_flow&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Signal: </span><span class="si">{</span><span class="n">exchange_flows</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Trend: </span><span class="si">{</span><span class="n">exchange_flows</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;trend&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Whale Activity:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">whale_activity</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;whale_activity&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Large Transactions (24h): </span><span class="si">{</span><span class="n">whale_activity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;large_transactions_24h&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Whale Accumulation: </span><span class="si">{</span><span class="n">whale_activity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;whale_accumulation&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Activity Level: </span><span class="si">{</span><span class="n">whale_activity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;activity_level&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### HODL Metrics:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">hodl_metrics</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hodl_metrics&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Long-term Holders: </span><span class="si">{</span><span class="n">hodl_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;long_term_holders_pct&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">%</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Supply Distribution: </span><span class="si">{</span><span class="n">hodl_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;supply_distribution&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Investment Implications:** </span><span class="si">{</span><span class="n">indicators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;investment_implications&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error fetching market indicators for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_onchain_comprehensive_analysis">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_onchain_comprehensive_analysis">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_onchain_comprehensive_analysis</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;crypto symbol like BTC, ETH&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve comprehensive on-chain analysis for a cryptocurrency.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        symbol (str): Crypto symbol like BTC, ETH</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Comprehensive on-chain analysis</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">onchain_loader</span> <span class="o">=</span> <span class="n">get_onchain_loader</span><span class="p">()</span>
        <span class="n">analysis</span> <span class="o">=</span> <span class="n">onchain_loader</span><span class="o">.</span><span class="n">get_comprehensive_analysis</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> Comprehensive On-Chain Analysis:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># Network Health Summary</span>
        <span class="n">network_health</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;network_health&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Network Health:** </span><span class="si">{</span><span class="n">network_health</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> &quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;(Score: </span><span class="si">{</span><span class="n">network_health</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;score&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/100)</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># Market Indicators Summary</span>
        <span class="n">market_indicators</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;market_indicators&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Key Market Signals:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">exchange_flows</span> <span class="o">=</span> <span class="n">market_indicators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exchange_flows&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Exchange Flow Signal: </span><span class="si">{</span><span class="n">exchange_flows</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="n">whale_activity</span> <span class="o">=</span> <span class="n">market_indicators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;whale_activity&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Whale Activity: </span><span class="si">{</span><span class="n">whale_activity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;activity_level&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="n">hodl_metrics</span> <span class="o">=</span> <span class="n">market_indicators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hodl_metrics&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Long-term Holders: </span><span class="si">{</span><span class="n">hodl_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;long_term_holders_pct&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">%</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># AI Insights</span>
        <span class="n">ai_insights</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ai_insights&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### AI-Powered Investment Analysis:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Confidence Score:** </span><span class="si">{</span><span class="n">ai_insights</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;confidence&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/100</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Investment Thesis:**</span><span class="se">\n</span><span class="si">{</span><span class="n">ai_insights</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;thesis&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Key Risks:** </span><span class="si">{</span><span class="n">ai_insights</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;risks&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Opportunities:** </span><span class="si">{</span><span class="n">ai_insights</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;opportunities&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># Summary metrics</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;summary&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;### Summary Metrics:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Overall Sentiment: </span><span class="si">{</span><span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sentiment&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Network Adoption: </span><span class="si">{</span><span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;adoption_trend&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;- Macro Trend: </span><span class="si">{</span><span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;macro_trend&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error fetching comprehensive analysis for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_metric_registry_data">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_metric_registry_data">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_metric_registry_data</span><span class="p">(</span>
    <span class="n">metric</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;metric name like &#39;active_addresses&#39;, &#39;whale_activity&#39;&quot;</span><span class="p">],</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;crypto symbol like BTC, ETH&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve specific on-chain metrics using the intelligent fallback system.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        metric (str): Specific metric name</span>
<span class="sd">        symbol (str): Crypto symbol like BTC, ETH</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: Formatted metric data with provider information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    
    <span class="c1"># Check if crypto mode is enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_crypto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Crypto mode is not enabled in configuration.&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="n">get_metric_registry</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_metric</span><span class="p">(</span><span class="n">metric</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;No data available for metric &#39;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s2">&#39; and symbol &#39;</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">metric</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        
        <span class="c1"># Get provider status to show which provider was used</span>
        <span class="n">provider_status</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_provider_status</span><span class="p">()</span>
        <span class="n">active_providers</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">status</span> <span class="ow">in</span> <span class="n">provider_status</span><span class="p">[</span><span class="s1">&#39;providers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> 
                          <span class="k">if</span> <span class="n">status</span><span class="p">[</span><span class="s1">&#39;healthy&#39;</span><span class="p">]]</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;value&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Value:** </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="s1">&#39;timestamp&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Timestamp:** </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="s1">&#39;provider&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Data Provider:** </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;provider&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="s1">&#39;confidence&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Confidence:** </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/100</span><span class="se">\n</span><span class="s2">&quot;</span>
            
            <span class="c1"># Add other data fields</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="s1">&#39;provider&#39;</span><span class="p">,</span> <span class="s1">&#39;confidence&#39;</span><span class="p">]:</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**</span><span class="si">{</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">:** </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Value:** </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">**System Status:** </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">active_providers</span><span class="p">)</span><span class="si">}</span><span class="s2"> providers healthy</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;**Data Availability:** </span><span class="si">{</span><span class="n">provider_status</span><span class="p">[</span><span class="s1">&#39;availability&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">%</span><span class="se">\n</span><span class="s2">&quot;</span>
        
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Error fetching metric &#39;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s2">&#39; for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>




<div class="viewcode-block" id="get_finnhub_company_insider_sentiment">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_finnhub_company_insider_sentiment">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_finnhub_company_insider_sentiment</span><span class="p">(</span>
    <span class="n">ticker</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol for the company&quot;</span><span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;current date of you are trading at, yyyy-mm-dd&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">look_back_days</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;number of days to look back&quot;</span><span class="p">],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve insider sentiment about a company (retrieved from public SEC information) for the past 15 days</span>
<span class="sd">    Args:</span>
<span class="sd">        ticker (str): ticker symbol of the company</span>
<span class="sd">        curr_date (str): current date you are trading on, yyyy-mm-dd</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: a report of the sentiment in the past 15 days starting at curr_date</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">date_obj</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">date_obj</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">look_back_days</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">get_data_in_range</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;insider_senti&quot;</span><span class="p">,</span> <span class="n">DATA_DIR</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="n">result_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">seen_dicts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">date</span><span class="p">,</span> <span class="n">senti_list</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">senti_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entry</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_dicts</span><span class="p">:</span>
                <span class="n">result_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">Change: </span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;change&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">Monthly Share Purchase Ratio: </span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;mspr&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                <span class="n">seen_dicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> Insider Sentiment Data for </span><span class="si">{</span><span class="n">before</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="n">result_str</span>
        <span class="o">+</span> <span class="s2">&quot;The change field refers to the net buying/selling from all insiders&#39; transactions. The mspr field refers to monthly share purchase ratio.&quot;</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="get_finnhub_company_insider_transactions">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_finnhub_company_insider_transactions">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_finnhub_company_insider_transactions</span><span class="p">(</span>
    <span class="n">ticker</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol&quot;</span><span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;current date you are trading at, yyyy-mm-dd&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">look_back_days</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;how many days to look back&quot;</span><span class="p">],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve insider transcaction information about a company (retrieved from public SEC information) for the past 15 days</span>
<span class="sd">    Args:</span>
<span class="sd">        ticker (str): ticker symbol of the company</span>
<span class="sd">        curr_date (str): current date you are trading at, yyyy-mm-dd</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: a report of the company&#39;s insider transaction/trading informtaion in the past 15 days</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">date_obj</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">date_obj</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">look_back_days</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">get_data_in_range</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;insider_trans&quot;</span><span class="p">,</span> <span class="n">DATA_DIR</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="n">result_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">seen_dicts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">date</span><span class="p">,</span> <span class="n">senti_list</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">senti_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entry</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_dicts</span><span class="p">:</span>
                <span class="n">result_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### Filing Date: </span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;filingDate&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">Change:</span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;change&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">Shares: </span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;share&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">Transaction Price: </span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;transactionPrice&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">Transaction Code: </span><span class="si">{</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;transactionCode&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                <span class="n">seen_dicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> insider transactions from </span><span class="si">{</span><span class="n">before</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="n">result_str</span>
        <span class="o">+</span> <span class="s2">&quot;The change field reflects the variation in share counthere a negative number indicates a reduction in holdingswhile share specifies the total number of shares involved. The transactionPrice denotes the per-share price at which the trade was executed, and transactionDate marks when the transaction occurred. The name field identifies the insider making the trade, and transactionCode (e.g., S for sale) clarifies the nature of the transaction. FilingDate records when the transaction was officially reported, and the unique id links to the specific SEC filing, as indicated by the source. Additionally, the symbol ties the transaction to a particular company, isDerivative flags whether the trade involves derivative securities, and currency notes the currency context of the transaction.&quot;</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="get_simfin_balance_sheet">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_simfin_balance_sheet">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_simfin_balance_sheet</span><span class="p">(</span>
    <span class="n">ticker</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol&quot;</span><span class="p">],</span>
    <span class="n">freq</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;reporting frequency of the company&#39;s financial history: annual / quarterly&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;current date you are trading at, yyyy-mm-dd&quot;</span><span class="p">],</span>
<span class="p">):</span>
    <span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">DATA_DIR</span><span class="p">,</span>
        <span class="s2">&quot;fundamental_data&quot;</span><span class="p">,</span>
        <span class="s2">&quot;simfin_data_all&quot;</span><span class="p">,</span>
        <span class="s2">&quot;balance_sheet&quot;</span><span class="p">,</span>
        <span class="s2">&quot;companies&quot;</span><span class="p">,</span>
        <span class="s2">&quot;us&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;us-balance-</span><span class="si">{</span><span class="n">freq</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>

    <span class="c1"># Convert date strings to datetime objects and remove any time components</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Report Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Report Date&quot;</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>

    <span class="c1"># Convert the current date to datetime and normalize</span>
    <span class="n">curr_date_dt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>

    <span class="c1"># Filter the DataFrame for the given ticker and for reports that were published on or before the current date</span>
    <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Ticker&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">ticker</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">curr_date_dt</span><span class="p">)]</span>

    <span class="c1"># Check if there are any available reports; if not, return a notification</span>
    <span class="k">if</span> <span class="n">filtered_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No balance sheet available before the given current date.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># Get the most recent balance sheet by selecting the row with the latest Publish Date</span>
    <span class="n">latest_balance_sheet</span> <span class="o">=</span> <span class="n">filtered_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">filtered_df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()]</span>

    <span class="c1"># drop the SimFinID column</span>
    <span class="n">latest_balance_sheet</span> <span class="o">=</span> <span class="n">latest_balance_sheet</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;SimFinId&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">freq</span><span class="si">}</span><span class="s2"> balance sheet for </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> released on </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">latest_balance_sheet</span><span class="p">[</span><span class="s1">&#39;Publish Date&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">latest_balance_sheet</span><span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">This includes metadata like reporting dates and currency, share details, and a breakdown of assets, liabilities, and equity. Assets are grouped as current (liquid items like cash and receivables) and noncurrent (long-term investments and property). Liabilities are split between short-term obligations and long-term debts, while equity reflects shareholder funds such as paid-in capital and retained earnings. Together, these components ensure that total assets equal the sum of liabilities and equity.&quot;</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="get_simfin_cashflow">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_simfin_cashflow">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_simfin_cashflow</span><span class="p">(</span>
    <span class="n">ticker</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol&quot;</span><span class="p">],</span>
    <span class="n">freq</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;reporting frequency of the company&#39;s financial history: annual / quarterly&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;current date you are trading at, yyyy-mm-dd&quot;</span><span class="p">],</span>
<span class="p">):</span>
    <span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">DATA_DIR</span><span class="p">,</span>
        <span class="s2">&quot;fundamental_data&quot;</span><span class="p">,</span>
        <span class="s2">&quot;simfin_data_all&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cash_flow&quot;</span><span class="p">,</span>
        <span class="s2">&quot;companies&quot;</span><span class="p">,</span>
        <span class="s2">&quot;us&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;us-cashflow-</span><span class="si">{</span><span class="n">freq</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>

    <span class="c1"># Convert date strings to datetime objects and remove any time components</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Report Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Report Date&quot;</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>

    <span class="c1"># Convert the current date to datetime and normalize</span>
    <span class="n">curr_date_dt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>

    <span class="c1"># Filter the DataFrame for the given ticker and for reports that were published on or before the current date</span>
    <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Ticker&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">ticker</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">curr_date_dt</span><span class="p">)]</span>

    <span class="c1"># Check if there are any available reports; if not, return a notification</span>
    <span class="k">if</span> <span class="n">filtered_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No cash flow statement available before the given current date.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># Get the most recent cash flow statement by selecting the row with the latest Publish Date</span>
    <span class="n">latest_cash_flow</span> <span class="o">=</span> <span class="n">filtered_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">filtered_df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()]</span>

    <span class="c1"># drop the SimFinID column</span>
    <span class="n">latest_cash_flow</span> <span class="o">=</span> <span class="n">latest_cash_flow</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;SimFinId&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">freq</span><span class="si">}</span><span class="s2"> cash flow statement for </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> released on </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">latest_cash_flow</span><span class="p">[</span><span class="s1">&#39;Publish Date&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">latest_cash_flow</span><span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">This includes metadata like reporting dates and currency, share details, and a breakdown of cash movements. Operating activities show cash generated from core business operations, including net income adjustments for non-cash items and working capital changes. Investing activities cover asset acquisitions/disposals and investments. Financing activities include debt transactions, equity issuances/repurchases, and dividend payments. The net change in cash represents the overall increase or decrease in the company&#39;s cash position during the reporting period.&quot;</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="get_simfin_income_statements">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_simfin_income_statements">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_simfin_income_statements</span><span class="p">(</span>
    <span class="n">ticker</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol&quot;</span><span class="p">],</span>
    <span class="n">freq</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;reporting frequency of the company&#39;s financial history: annual / quarterly&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;current date you are trading at, yyyy-mm-dd&quot;</span><span class="p">],</span>
<span class="p">):</span>
    <span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">DATA_DIR</span><span class="p">,</span>
        <span class="s2">&quot;fundamental_data&quot;</span><span class="p">,</span>
        <span class="s2">&quot;simfin_data_all&quot;</span><span class="p">,</span>
        <span class="s2">&quot;income_statements&quot;</span><span class="p">,</span>
        <span class="s2">&quot;companies&quot;</span><span class="p">,</span>
        <span class="s2">&quot;us&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;us-income-</span><span class="si">{</span><span class="n">freq</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>

    <span class="c1"># Convert date strings to datetime objects and remove any time components</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Report Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Report Date&quot;</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>

    <span class="c1"># Convert the current date to datetime and normalize</span>
    <span class="n">curr_date_dt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>

    <span class="c1"># Filter the DataFrame for the given ticker and for reports that were published on or before the current date</span>
    <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Ticker&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">ticker</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">curr_date_dt</span><span class="p">)]</span>

    <span class="c1"># Check if there are any available reports; if not, return a notification</span>
    <span class="k">if</span> <span class="n">filtered_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No income statement available before the given current date.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># Get the most recent income statement by selecting the row with the latest Publish Date</span>
    <span class="n">latest_income</span> <span class="o">=</span> <span class="n">filtered_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">filtered_df</span><span class="p">[</span><span class="s2">&quot;Publish Date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()]</span>

    <span class="c1"># drop the SimFinID column</span>
    <span class="n">latest_income</span> <span class="o">=</span> <span class="n">latest_income</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;SimFinId&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">freq</span><span class="si">}</span><span class="s2"> income statement for </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> released on </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">latest_income</span><span class="p">[</span><span class="s1">&#39;Publish Date&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">latest_income</span><span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">This includes metadata like reporting dates and currency, share details, and a comprehensive breakdown of the company&#39;s financial performance. Starting with Revenue, it shows Cost of Revenue and resulting Gross Profit. Operating Expenses are detailed, including SG&amp;A, R&amp;D, and Depreciation. The statement then shows Operating Income, followed by non-operating items and Interest Expense, leading to Pretax Income. After accounting for Income Tax and any Extraordinary items, it concludes with Net Income, representing the company&#39;s bottom-line profit or loss for the period.&quot;</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="get_google_news">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_google_news">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_google_news</span><span class="p">(</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Query to search with&quot;</span><span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Curr date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
    <span class="n">look_back_days</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;how many days to look back&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>

    <span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">look_back_days</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">news_results</span> <span class="o">=</span> <span class="n">getNewsData</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">curr_date</span><span class="p">)</span>

    <span class="n">news_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">for</span> <span class="n">news</span> <span class="ow">in</span> <span class="n">news_results</span><span class="p">:</span>
        <span class="n">news_str</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">news</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (source: </span><span class="si">{</span><span class="n">news</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">) </span><span class="se">\n\n</span><span class="si">{</span><span class="n">news</span><span class="p">[</span><span class="s1">&#39;snippet&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">news_results</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2"> Google News, from </span><span class="si">{</span><span class="n">before</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">news_str</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_reddit_global_news">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_reddit_global_news">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_reddit_global_news</span><span class="p">(</span>
    <span class="n">start_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Start date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
    <span class="n">look_back_days</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;how many days to look back&quot;</span><span class="p">],</span>
    <span class="n">max_limit_per_day</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;Maximum number of news per day&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the latest top reddit news</span>
<span class="sd">    Args:</span>
<span class="sd">        start_date: Start date in yyyy-mm-dd format</span>
<span class="sd">        end_date: End date in yyyy-mm-dd format</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: A formatted dataframe containing the latest news articles posts on reddit and meta information in these columns: &quot;created_utc&quot;, &quot;id&quot;, &quot;title&quot;, &quot;selftext&quot;, &quot;score&quot;, &quot;num_comments&quot;, &quot;url&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">look_back_days</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">posts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># iterate from start_date to end_date</span>
    <span class="n">curr_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">total_iterations</span> <span class="o">=</span> <span class="p">(</span><span class="n">start_date</span> <span class="o">-</span> <span class="n">curr_date</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">pbar</span> <span class="o">=</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Getting Global News on </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">total_iterations</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">curr_date</span> <span class="o">&lt;=</span> <span class="n">start_date</span><span class="p">:</span>
        <span class="n">curr_date_str</span> <span class="o">=</span> <span class="n">curr_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fetch_result</span> <span class="o">=</span> <span class="n">fetch_top_from_category</span><span class="p">(</span>
            <span class="s2">&quot;global_news&quot;</span><span class="p">,</span>
            <span class="n">curr_date_str</span><span class="p">,</span>
            <span class="n">max_limit_per_day</span><span class="p">,</span>
            <span class="n">data_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;reddit_data&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">posts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">fetch_result</span><span class="p">)</span>
        <span class="n">curr_date</span> <span class="o">+=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">pbar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">posts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="n">news_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">post</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">news_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">post</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">news_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">post</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="si">{</span><span class="n">post</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;## Global News Reddit, from </span><span class="si">{</span><span class="n">before</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="n">news_str</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_reddit_company_news">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_reddit_company_news">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_reddit_company_news</span><span class="p">(</span>
    <span class="n">ticker</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol of the company&quot;</span><span class="p">],</span>
    <span class="n">start_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Start date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
    <span class="n">look_back_days</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;how many days to look back&quot;</span><span class="p">],</span>
    <span class="n">max_limit_per_day</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;Maximum number of news per day&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the latest top reddit news</span>
<span class="sd">    Args:</span>
<span class="sd">        ticker: ticker symbol of the company</span>
<span class="sd">        start_date: Start date in yyyy-mm-dd format</span>
<span class="sd">        end_date: End date in yyyy-mm-dd format</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: A formatted dataframe containing the latest news articles posts on reddit and meta information in these columns: &quot;created_utc&quot;, &quot;id&quot;, &quot;title&quot;, &quot;selftext&quot;, &quot;score&quot;, &quot;num_comments&quot;, &quot;url&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">look_back_days</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">posts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># iterate from start_date to end_date</span>
    <span class="n">curr_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">total_iterations</span> <span class="o">=</span> <span class="p">(</span><span class="n">start_date</span> <span class="o">-</span> <span class="n">curr_date</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">pbar</span> <span class="o">=</span> <span class="n">tqdm</span><span class="p">(</span>
        <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Getting Company News for </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">total</span><span class="o">=</span><span class="n">total_iterations</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">while</span> <span class="n">curr_date</span> <span class="o">&lt;=</span> <span class="n">start_date</span><span class="p">:</span>
        <span class="n">curr_date_str</span> <span class="o">=</span> <span class="n">curr_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fetch_result</span> <span class="o">=</span> <span class="n">fetch_top_from_category</span><span class="p">(</span>
            <span class="s2">&quot;company_news&quot;</span><span class="p">,</span>
            <span class="n">curr_date_str</span><span class="p">,</span>
            <span class="n">max_limit_per_day</span><span class="p">,</span>
            <span class="n">ticker</span><span class="p">,</span>
            <span class="n">data_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;reddit_data&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">posts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">fetch_result</span><span class="p">)</span>
        <span class="n">curr_date</span> <span class="o">+=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">pbar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">posts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="n">news_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">post</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">news_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">post</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">news_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">post</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="si">{</span><span class="n">post</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;##</span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> News Reddit, from </span><span class="si">{</span><span class="n">before</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">news_str</span><span class="si">}</span><span class="s2">&quot;</span></div>



<div class="viewcode-block" id="get_stock_stats_indicators_window">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_stock_stats_indicators_window">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stock_stats_indicators_window</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol of the company&quot;</span><span class="p">],</span>
    <span class="n">indicator</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;technical indicator to get the analysis and report of&quot;</span><span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;The current trading date you are trading on, YYYY-mm-dd&quot;</span>
    <span class="p">],</span>
    <span class="n">look_back_days</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;how many days to look back&quot;</span><span class="p">],</span>
    <span class="n">online</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="s2">&quot;to fetch data online or offline&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

    <span class="n">best_ind_params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># Moving Averages</span>
        <span class="s2">&quot;close_50_sma&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;50 SMA: A medium-term trend indicator. &quot;</span>
            <span class="s2">&quot;Usage: Identify trend direction and serve as dynamic support/resistance. &quot;</span>
            <span class="s2">&quot;Tips: It lags price; combine with faster indicators for timely signals.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;close_200_sma&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;200 SMA: A long-term trend benchmark. &quot;</span>
            <span class="s2">&quot;Usage: Confirm overall market trend and identify golden/death cross setups. &quot;</span>
            <span class="s2">&quot;Tips: It reacts slowly; best for strategic trend confirmation rather than frequent trading entries.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;close_10_ema&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;10 EMA: A responsive short-term average. &quot;</span>
            <span class="s2">&quot;Usage: Capture quick shifts in momentum and potential entry points. &quot;</span>
            <span class="s2">&quot;Tips: Prone to noise in choppy markets; use alongside longer averages for filtering false signals.&quot;</span>
        <span class="p">),</span>
        <span class="c1"># MACD Related</span>
        <span class="s2">&quot;macd&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;MACD: Computes momentum via differences of EMAs. &quot;</span>
            <span class="s2">&quot;Usage: Look for crossovers and divergence as signals of trend changes. &quot;</span>
            <span class="s2">&quot;Tips: Confirm with other indicators in low-volatility or sideways markets.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;macds&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;MACD Signal: An EMA smoothing of the MACD line. &quot;</span>
            <span class="s2">&quot;Usage: Use crossovers with the MACD line to trigger trades. &quot;</span>
            <span class="s2">&quot;Tips: Should be part of a broader strategy to avoid false positives.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;macdh&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;MACD Histogram: Shows the gap between the MACD line and its signal. &quot;</span>
            <span class="s2">&quot;Usage: Visualize momentum strength and spot divergence early. &quot;</span>
            <span class="s2">&quot;Tips: Can be volatile; complement with additional filters in fast-moving markets.&quot;</span>
        <span class="p">),</span>
        <span class="c1"># Momentum Indicators</span>
        <span class="s2">&quot;rsi&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;RSI: Measures momentum to flag overbought/oversold conditions. &quot;</span>
            <span class="s2">&quot;Usage: Apply 70/30 thresholds and watch for divergence to signal reversals. &quot;</span>
            <span class="s2">&quot;Tips: In strong trends, RSI may remain extreme; always cross-check with trend analysis.&quot;</span>
        <span class="p">),</span>
        <span class="c1"># Volatility Indicators</span>
        <span class="s2">&quot;boll&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Bollinger Middle: A 20 SMA serving as the basis for Bollinger Bands. &quot;</span>
            <span class="s2">&quot;Usage: Acts as a dynamic benchmark for price movement. &quot;</span>
            <span class="s2">&quot;Tips: Combine with the upper and lower bands to effectively spot breakouts or reversals.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;boll_ub&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Bollinger Upper Band: Typically 2 standard deviations above the middle line. &quot;</span>
            <span class="s2">&quot;Usage: Signals potential overbought conditions and breakout zones. &quot;</span>
            <span class="s2">&quot;Tips: Confirm signals with other tools; prices may ride the band in strong trends.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;boll_lb&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Bollinger Lower Band: Typically 2 standard deviations below the middle line. &quot;</span>
            <span class="s2">&quot;Usage: Indicates potential oversold conditions. &quot;</span>
            <span class="s2">&quot;Tips: Use additional analysis to avoid false reversal signals.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;atr&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;ATR: Averages true range to measure volatility. &quot;</span>
            <span class="s2">&quot;Usage: Set stop-loss levels and adjust position sizes based on current market volatility. &quot;</span>
            <span class="s2">&quot;Tips: It&#39;s a reactive measure, so use it as part of a broader risk management strategy.&quot;</span>
        <span class="p">),</span>
        <span class="c1"># Volume-Based Indicators</span>
        <span class="s2">&quot;vwma&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;VWMA: A moving average weighted by volume. &quot;</span>
            <span class="s2">&quot;Usage: Confirm trends by integrating price action with volume data. &quot;</span>
            <span class="s2">&quot;Tips: Watch for skewed results from volume spikes; use in combination with other volume analyses.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;mfi&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;MFI: The Money Flow Index is a momentum indicator that uses both price and volume to measure buying and selling pressure. &quot;</span>
            <span class="s2">&quot;Usage: Identify overbought (&gt;80) or oversold (&lt;20) conditions and confirm the strength of trends or reversals. &quot;</span>
            <span class="s2">&quot;Tips: Use alongside RSI or MACD to confirm signals; divergence between price and MFI can indicate potential reversals.&quot;</span>
        <span class="p">),</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">indicator</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">best_ind_params</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Indicator </span><span class="si">{</span><span class="n">indicator</span><span class="si">}</span><span class="s2"> is not supported. Please choose from: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">best_ind_params</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">end_date</span> <span class="o">=</span> <span class="n">curr_date</span>
    <span class="n">curr_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">curr_date</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">look_back_days</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">online</span><span class="p">:</span>
        <span class="c1"># read from YFin data</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">DATA_DIR</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;market_data/price_data/</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">-YFin-data-2015-01-01-2025-03-25.csv&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">dates_in_df</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>

        <span class="n">ind_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">while</span> <span class="n">curr_date</span> <span class="o">&gt;=</span> <span class="n">before</span><span class="p">:</span>
            <span class="c1"># only do the trading dates</span>
            <span class="k">if</span> <span class="n">curr_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">dates_in_df</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
                <span class="n">indicator_value</span> <span class="o">=</span> <span class="n">get_stockstats_indicator</span><span class="p">(</span>
                    <span class="n">symbol</span><span class="p">,</span> <span class="n">indicator</span><span class="p">,</span> <span class="n">curr_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">online</span>
                <span class="p">)</span>

                <span class="n">ind_string</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">curr_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">indicator_value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

            <span class="n">curr_date</span> <span class="o">=</span> <span class="n">curr_date</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># online gathering</span>
        <span class="n">ind_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">while</span> <span class="n">curr_date</span> <span class="o">&gt;=</span> <span class="n">before</span><span class="p">:</span>
            <span class="n">indicator_value</span> <span class="o">=</span> <span class="n">get_stockstats_indicator</span><span class="p">(</span>
                <span class="n">symbol</span><span class="p">,</span> <span class="n">indicator</span><span class="p">,</span> <span class="n">curr_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">online</span>
            <span class="p">)</span>

            <span class="n">ind_string</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">curr_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">indicator_value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

            <span class="n">curr_date</span> <span class="o">=</span> <span class="n">curr_date</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">result_str</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">indicator</span><span class="si">}</span><span class="s2"> values from </span><span class="si">{</span><span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="n">ind_string</span>
        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="n">best_ind_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">indicator</span><span class="p">,</span> <span class="s2">&quot;No description available.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">result_str</span></div>



<div class="viewcode-block" id="get_stockstats_indicator">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_stockstats_indicator">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stockstats_indicator</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol of the company&quot;</span><span class="p">],</span>
    <span class="n">indicator</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;technical indicator to get the analysis and report of&quot;</span><span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;The current trading date you are trading on, YYYY-mm-dd&quot;</span>
    <span class="p">],</span>
    <span class="n">online</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="s2">&quot;to fetch data online or offline&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

    <span class="n">curr_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">curr_date</span> <span class="o">=</span> <span class="n">curr_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">indicator_value</span> <span class="o">=</span> <span class="n">StockstatsUtils</span><span class="o">.</span><span class="n">get_stock_stats</span><span class="p">(</span>
            <span class="n">symbol</span><span class="p">,</span>
            <span class="n">indicator</span><span class="p">,</span>
            <span class="n">curr_date</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;market_data&quot;</span><span class="p">,</span> <span class="s2">&quot;price_data&quot;</span><span class="p">),</span>
            <span class="n">online</span><span class="o">=</span><span class="n">online</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error getting stockstats indicator data for indicator </span><span class="si">{</span><span class="n">indicator</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">indicator_value</span><span class="p">)</span></div>



<div class="viewcode-block" id="get_YFin_data_window">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_YFin_data_window">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_YFin_data_window</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol of the company&quot;</span><span class="p">],</span>
    <span class="n">curr_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Start date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
    <span class="n">look_back_days</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;how many days to look back&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># calculate past days</span>
    <span class="n">date_obj</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">date_obj</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">look_back_days</span><span class="p">)</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># read in data</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">DATA_DIR</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;market_data/price_data/</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">-YFin-data-2015-01-01-2025-03-25.csv&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Extract just the date part for comparison</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;DateOnly&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>

    <span class="c1"># Filter data between the start and end dates (inclusive)</span>
    <span class="n">filtered_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span>
        <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;DateOnly&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;DateOnly&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">curr_date</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="c1"># Drop the temporary column we created</span>
    <span class="n">filtered_data</span> <span class="o">=</span> <span class="n">filtered_data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;DateOnly&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Set pandas display options to show the full DataFrame</span>
    <span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span>
        <span class="s2">&quot;display.max_rows&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;display.max_columns&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;display.width&quot;</span><span class="p">,</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="n">df_string</span> <span class="o">=</span> <span class="n">filtered_data</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;## Raw Market Data for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="o">+</span> <span class="n">df_string</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="get_YFin_data_online">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_YFin_data_online">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_YFin_data_online</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol of the company&quot;</span><span class="p">],</span>
    <span class="n">start_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Start date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
    <span class="n">end_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;End date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
<span class="p">):</span>

    <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">end_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Create ticker object</span>
    <span class="n">ticker</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">Ticker</span><span class="p">(</span><span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

    <span class="c1"># Fetch historical data for the specified date range</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">ticker</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">end_date</span><span class="p">)</span>

    <span class="c1"># Check if data is empty</span>
    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No data found for symbol &#39;</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&#39; between </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Remove timezone info from index for cleaner output</span>
    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tz</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="c1"># Round numerical values to 2 decimal places for cleaner display</span>
    <span class="n">numeric_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Open&quot;</span><span class="p">,</span> <span class="s2">&quot;High&quot;</span><span class="p">,</span> <span class="s2">&quot;Low&quot;</span><span class="p">,</span> <span class="s2">&quot;Close&quot;</span><span class="p">,</span> <span class="s2">&quot;Adj Close&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">numeric_columns</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Convert DataFrame to CSV string</span>
    <span class="n">csv_string</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">()</span>

    <span class="c1"># Add header information</span>
    <span class="n">header</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;# Stock data for </span><span class="si">{</span><span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;# Total records: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;# Data retrieved on: </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">header</span> <span class="o">+</span> <span class="n">csv_string</span></div>



<div class="viewcode-block" id="get_YFin_data">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_YFin_data">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_YFin_data</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ticker symbol of the company&quot;</span><span class="p">],</span>
    <span class="n">start_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Start date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
    <span class="n">end_date</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;End date in yyyy-mm-dd format&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># read in data</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">DATA_DIR</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;market_data/price_data/</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">-YFin-data-2015-01-01-2025-03-25.csv&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">end_date</span> <span class="o">&gt;</span> <span class="s2">&quot;2025-03-25&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Get_YFin_Data: </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2"> is outside of the data range of 2015-01-01 to 2025-03-25&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Extract just the date part for comparison</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;DateOnly&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>

    <span class="c1"># Filter data between the start and end dates (inclusive)</span>
    <span class="n">filtered_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span>
        <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;DateOnly&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;DateOnly&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="c1"># Drop the temporary column we created</span>
    <span class="n">filtered_data</span> <span class="o">=</span> <span class="n">filtered_data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;DateOnly&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># remove the index from the dataframe</span>
    <span class="n">filtered_data</span> <span class="o">=</span> <span class="n">filtered_data</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">filtered_data</span></div>



<div class="viewcode-block" id="get_stock_news_openai">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_stock_news_openai">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stock_news_openai</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">curr_date</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;backend_url&quot;</span><span class="p">])</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;quick_think_llm&quot;</span><span class="p">],</span>
        <span class="nb">input</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
                <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;input_text&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Can you search Social Media for </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> from 7 days before </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">? Make sure you only get the data posted during that period.&quot;</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">],</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="n">text</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">}},</span>
        <span class="n">reasoning</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;web_search_preview&quot;</span><span class="p">,</span>
                <span class="s2">&quot;user_location&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;approximate&quot;</span><span class="p">},</span>
                <span class="s2">&quot;search_context_size&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="n">temperature</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">max_output_tokens</span><span class="o">=</span><span class="mi">4096</span><span class="p">,</span>
        <span class="n">top_p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">store</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span></div>



<div class="viewcode-block" id="get_global_news_openai">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_global_news_openai">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_global_news_openai</span><span class="p">(</span><span class="n">curr_date</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;backend_url&quot;</span><span class="p">])</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;quick_think_llm&quot;</span><span class="p">],</span>
        <span class="nb">input</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
                <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;input_text&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Can you search global or macroeconomics news from 7 days before </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2"> that would be informative for trading purposes? Make sure you only get the data posted during that period.&quot;</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">],</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="n">text</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">}},</span>
        <span class="n">reasoning</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;web_search_preview&quot;</span><span class="p">,</span>
                <span class="s2">&quot;user_location&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;approximate&quot;</span><span class="p">},</span>
                <span class="s2">&quot;search_context_size&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="n">temperature</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">max_output_tokens</span><span class="o">=</span><span class="mi">4096</span><span class="p">,</span>
        <span class="n">top_p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">store</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span></div>



<div class="viewcode-block" id="get_fundamentals_openai">
<a class="viewcode-back" href="../../../api/generated/tradingagents.dataflows.interface.html#tradingagents.dataflows.get_fundamentals_openai">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_fundamentals_openai</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">curr_date</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;backend_url&quot;</span><span class="p">])</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;quick_think_llm&quot;</span><span class="p">],</span>
        <span class="nb">input</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
                <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;input_text&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Can you search Fundamental for discussions on </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> during of the month before </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2"> to the month of </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">. Make sure you only get the data posted during that period. List as a table, with PE/PS/Cash flow/ etc&quot;</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">],</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="n">text</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">}},</span>
        <span class="n">reasoning</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;web_search_preview&quot;</span><span class="p">,</span>
                <span class="s2">&quot;user_location&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;approximate&quot;</span><span class="p">},</span>
                <span class="s2">&quot;search_context_size&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="n">temperature</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">max_output_tokens</span><span class="o">=</span><span class="mi">4096</span><span class="p">,</span>
        <span class="n">top_p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">store</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, TauricResearch.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>